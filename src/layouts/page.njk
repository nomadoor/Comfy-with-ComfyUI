---
layout: base.njk
---
{% from "icon.njk" import icon %}
{% set currentLang = lang or site.defaultLang %}
{% set workflowI18n = site.i18n.workflow or {} %}
{% set workflowJsonHeading = workflowI18n.jsonHeading[currentLang] or workflowI18n.jsonHeading[site.defaultLang] or "Workflow JSON" %}
{% set workflowRelatedHeading = workflowI18n.relatedHeading[currentLang] or workflowI18n.relatedHeading[site.defaultLang] or "Related workflows" %}
{% set workflowCopyLabel = "Copy" %}
{% set workflowDownloadLabel = "Download" %}
{% set workflowCopiedLabel = "Copied" %}
{% set workflowDownloadedLabel = "Downloaded" %}
{% set footerConfig = site.footer or {} %}
{% set footerTitle = footerConfig.title[currentLang] or footerConfig.title[site.defaultLang] %}
{% set footerText = footerConfig.body[currentLang] or footerConfig.body[site.defaultLang] %}
{% set footerLinks = footerConfig.links or [] %}
{% include "hero.njk" %}
<div class="article-body">
  {{ content | safe }}
</div>
{% if workflowJson and workflowJson.length %}
<section class="workflow-json">
  <h2 class="workflow-json__heading">{{ workflowJsonHeading }}</h2>
  <ul class="workflow-json__list">
    {% for workflow in workflowJson %}
      {% set fileName = (workflow.json or '') | basename %}
      <li class="workflow-json__row">
        <span class="workflow-json__filename">{{ fileName }}</span>
        <div class="workflow-json__actions">
          <button class="workflow-json__icon" type="button" aria-label="{{ workflowCopyLabel }} {{ fileName }}" data-copy-json="{{ workflow.id }}-json" data-label="{{ workflowCopyLabel }}" data-success-label="{{ workflowCopiedLabel }}">
            {{ icon("copy") }}
          </button>
          <a class="workflow-json__icon" href="{{ workflow.json }}" download="{{ fileName }}" data-no-swup aria-label="{{ workflowDownloadLabel }} {{ fileName }}" data-download-json="{{ workflow.id }}-json" data-label="{{ workflowDownloadLabel }}" data-success-label="{{ workflowDownloadedLabel }}">
            {{ icon("download") }}
          </a>
        </div>
      </li>
      {% if workflow.copy %}
        <pre id="{{ workflow.id }}-json" class="sr-only">{{ workflow.copy | safe }}</pre>
      {% endif %}
    {% endfor %}
  </ul>
</section>
{% endif %}

{% if section == "basic-workflows" %}
  {% set relatedPages = collections.all | relatedWorkflows(page.url, tags, lang) %}
  {% if relatedPages.length %}
    <section class="workflow-related">
      <h2 class="workflow-related__heading">{{ workflowRelatedHeading }}</h2>
      <div class="workflow-related__grid">
        {% for entry in relatedPages %}
          <a class="workflow-related__card" href="{{ entry.url }}">
            <span class="workflow-related__title">{{ entry.title }}</span>
            {% if entry.summary %}
            <span class="workflow-related__summary">{{ entry.summary }}</span>
            {% endif %}
          </a>
        {% endfor %}
      </div>
    </section>
  {% endif %}
{% endif %}

{% if footerTitle or footerText or footerLinks.length %}
  {% set footerLogoBase = 'src/assets/logos/logo_Comfy-ComfyUI.svg' | svgDataUri %}
  {% set footerLogoJa = 'src/assets/logos/logo_に使う.svg' | svgDataUri %}
  {% set footerLogoEn = 'src/assets/logos/logo_with.svg' | svgDataUri %}
  <footer class="article-footer">
    <div class="article-footer__inner">
      <div
        class="article-footer__logo"
        aria-label="{{ footerTitle }}"
        style="--footer-logo-base: {{ footerLogoBase }}; --footer-logo-ja: {{ footerLogoJa }}; --footer-logo-en: {{ footerLogoEn }};"
      >
        <span class="sr-only">{{ footerTitle }}</span>
        <span class="article-footer__logo-mark">
          <span class="article-footer__logo-layer article-footer__logo-layer--base"></span>
          <span class="article-footer__logo-layer article-footer__logo-layer--text{% if currentLang == 'ja' %} article-footer__logo-layer--ja{% else %} article-footer__logo-layer--en{% endif %}"></span>
        </span>
      </div>
      <div class="article-footer__links">
        <a class="article-footer__link" href="/{{ currentLang }}/begin-with/how-to-use-this-site/">{{ site.i18n.footerGuide[currentLang] or site.i18n.footerGuide[site.defaultLang] or "How to use this site" }}</a>
        <a class="article-footer__link article-footer__link--external" href="https://github.com/" target="_blank" rel="noreferrer noopener">
          <span>GitHub</span>
          <span class="article-footer__link-icon">{{ icon("newscreen") }}</span>
        </a>
      </div>
    </div>
  </footer>
{% endif %}
